{"ast":null,"code":"import React,{useState,useEffect}from'react';import styles from'../styles/BookingForm.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function BookingForm(){const[origen,setOrigen]=useState('');const[destino,setDestino]=useState('');const[dia,setDia]=useState('');const[suggestionsOrigen,setSuggestionsOrigen]=useState([]);const[suggestionsDestino,setSuggestionsDestino]=useState([]);const[showSuggestionsOrigen,setShowSuggestionsOrigen]=useState(false);const[showSuggestionsDestino,setShowSuggestionsDestino]=useState(false);const[activeSuggestionIndexOrigen,setActiveSuggestionIndexOrigen]=useState(-1);const[activeSuggestionIndexDestino,setActiveSuggestionIndexDestino]=useState(-1);const apiUrl=\"https://reservas-avion-back.vercel.app\";const[flights,setFlights]=useState([]);const handleSubmit=async event=>{event.preventDefault();// Enviar datos al backend\nconst response=await fetch(\"\".concat(apiUrl,\"/v1/crearViajes\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({origen,destino,dia})});const data=await response.json();console.log(data);};const fetchFlights=async()=>{try{const response=await fetch(\"\".concat(apiUrl,\"v1/listarViajes\"));if(response.ok){const data=await response.json();setFlights(data);}else{console.error('Error al obtener la lista de vuelos');}}catch(error){console.error('Error al enviar la solicitud:',error);}};// Llamar a fetchFlights una vez al cargar el componente\nuseEffect(()=>{fetchFlights();},[]);const fetchSuggestions=async(input,setSuggestions,setShowSuggestions,setActiveSuggestionIndex)=>{try{const response=await fetch(\"\".concat(apiUrl,\"v1/getSuggestions?query=\").concat(input));if(response.ok){const data=await response.json();setSuggestions(data);setShowSuggestions(true);}else{console.error('Error al obtener las sugerencias');}}catch(error){console.error('Error al enviar la solicitud:',error);}};const handleOriginChange=async event=>{const inputValue=event.target.value;setOrigen(inputValue);fetchSuggestions(inputValue,setSuggestionsOrigen,setShowSuggestionsOrigen,setActiveSuggestionIndexOrigen);};const handleDestinationChange=async event=>{const inputValue=event.target.value;setDestino(inputValue);fetchSuggestions(inputValue,setSuggestionsDestino,setShowSuggestionsDestino,setActiveSuggestionIndexDestino);};const handleSuggestionClick=(index,setOrigen,setDestino,showSuggestionsOrigen,setShowSuggestionsOrigen)=>{const selectedSuggestion=suggestionsOrigen[index];setOrigen(selectedSuggestion.name);// Actualiza el estado de origen\nsetShowSuggestionsOrigen(false);// Oculta las sugerencias de origen\n};useEffect(()=>{// Código a ejecutar cuando el componente se monta\nconsole.log('El componente se ha montado');},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"bookingFormContainer\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"titulo\",children:\"Aviones Alejo\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Crear Vuelos\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Origen:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"inputField\",value:origen,onClick:()=>setShowSuggestionsOrigen(true),onBlur:()=>setTimeout(()=>setShowSuggestionsOrigen(false),100),onChange:handleOriginChange}),/*#__PURE__*/_jsx(\"div\",{className:\"suggestionList\",children:showSuggestionsOrigen&&/*#__PURE__*/_jsx(\"ul\",{children:suggestionsOrigen.map((suggestion,index)=>/*#__PURE__*/_jsx(\"li\",{className:\"suggestionItem \".concat(activeSuggestionIndexOrigen===index?'active':''),onClick:()=>handleSuggestionClick(index),children:suggestion.name},index))})})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Destino:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"inputField\",value:destino,onClick:()=>setShowSuggestionsDestino(true),onBlur:()=>setTimeout(()=>setShowSuggestionsDestino(false),100),onChange:handleDestinationChange}),/*#__PURE__*/_jsx(\"div\",{className:\"suggestionList\",children:showSuggestionsDestino&&/*#__PURE__*/_jsx(\"ul\",{children:suggestionsDestino.map((suggestion,index)=>/*#__PURE__*/_jsx(\"li\",{className:\"suggestionItem \".concat(activeSuggestionIndexDestino===index?'active':''),onClick:()=>handleSuggestionClick(index,setDestino,setShowSuggestionsDestino),children:suggestion.name},index))})})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"D\\xEDa:\",/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"dayInput\",value:dia,onChange:e=>setDia(e.target.value)})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button\",children:\"Guardar\"})]})]});}export default BookingForm;","map":{"version":3,"names":["React","useState","useEffect","styles","jsx","_jsx","jsxs","_jsxs","BookingForm","origen","setOrigen","destino","setDestino","dia","setDia","suggestionsOrigen","setSuggestionsOrigen","suggestionsDestino","setSuggestionsDestino","showSuggestionsOrigen","setShowSuggestionsOrigen","showSuggestionsDestino","setShowSuggestionsDestino","activeSuggestionIndexOrigen","setActiveSuggestionIndexOrigen","activeSuggestionIndexDestino","setActiveSuggestionIndexDestino","apiUrl","flights","setFlights","handleSubmit","event","preventDefault","response","fetch","concat","method","headers","body","JSON","stringify","data","json","console","log","fetchFlights","ok","error","fetchSuggestions","input","setSuggestions","setShowSuggestions","setActiveSuggestionIndex","handleOriginChange","inputValue","target","value","handleDestinationChange","handleSuggestionClick","index","selectedSuggestion","name","className","children","onSubmit","type","onClick","onBlur","setTimeout","onChange","map","suggestion","e"],"sources":["C:/Users/Usuario/Desktop/reservas-avion-front/src/components/BookingForm.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport styles from '../styles/BookingForm.css';\r\n\r\nfunction BookingForm() {\r\n    const [origen, setOrigen] = useState('');\r\n    const [destino, setDestino] = useState('');\r\n    const [dia, setDia] = useState('');\r\n    const [suggestionsOrigen, setSuggestionsOrigen] = useState([]);\r\n    const [suggestionsDestino, setSuggestionsDestino] = useState([]);\r\n    const [showSuggestionsOrigen, setShowSuggestionsOrigen] = useState(false);\r\n    const [showSuggestionsDestino, setShowSuggestionsDestino] = useState(false);\r\n    const [activeSuggestionIndexOrigen, setActiveSuggestionIndexOrigen] = useState(-1);\r\n    const [activeSuggestionIndexDestino, setActiveSuggestionIndexDestino] = useState(-1);\r\n    const apiUrl = \"https://reservas-avion-back.vercel.app\";\r\n\r\n    const [flights, setFlights] = useState([]);\r\n\r\n    const handleSubmit = async (event) => {\r\n        event.preventDefault();\r\n        // Enviar datos al backend\r\n        const response = await fetch(`${apiUrl}/v1/crearViajes`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({ origen, destino, dia }),\r\n        });\r\n        const data = await response.json();\r\n        console.log(data);\r\n    };\r\n    const fetchFlights = async () => {\r\n        try {\r\n            const response = await fetch(`${apiUrl}v1/listarViajes`);\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setFlights(data);\r\n            } else {\r\n                console.error('Error al obtener la lista de vuelos');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error al enviar la solicitud:', error);\r\n        }\r\n    };\r\n\r\n    // Llamar a fetchFlights una vez al cargar el componente\r\n    useEffect(() => {\r\n        fetchFlights();\r\n    }, []);\r\n\r\n    const fetchSuggestions = async (input, setSuggestions, setShowSuggestions, setActiveSuggestionIndex) => {\r\n        try {\r\n            const response = await fetch(`${apiUrl}v1/getSuggestions?query=${input}`);\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setSuggestions(data);\r\n                setShowSuggestions(true);\r\n            } else {\r\n                console.error('Error al obtener las sugerencias');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error al enviar la solicitud:', error);\r\n        }\r\n    };\r\n    \r\n\r\n    const handleOriginChange = async (event) => {\r\n        const inputValue = event.target.value;\r\n        setOrigen(inputValue);\r\n        fetchSuggestions(inputValue, setSuggestionsOrigen, setShowSuggestionsOrigen, setActiveSuggestionIndexOrigen);\r\n    };\r\n\r\n    const handleDestinationChange = async (event) => {\r\n        const inputValue = event.target.value;\r\n        setDestino(inputValue);\r\n        fetchSuggestions(inputValue, setSuggestionsDestino, setShowSuggestionsDestino, setActiveSuggestionIndexDestino);\r\n    };\r\n\r\n    const handleSuggestionClick = (index, setOrigen, setDestino, showSuggestionsOrigen, setShowSuggestionsOrigen) => {\r\n        const selectedSuggestion = suggestionsOrigen[index];\r\n        setOrigen(selectedSuggestion.name); // Actualiza el estado de origen\r\n        setShowSuggestionsOrigen(false); // Oculta las sugerencias de origen\r\n    };\r\n      \r\n    \r\n    useEffect(() => {\r\n        // Código a ejecutar cuando el componente se monta\r\n        console.log('El componente se ha montado');\r\n    }, []);\r\n    return (\r\n        <div className=\"bookingFormContainer\">\r\n            <h1 className='titulo'>Aviones Alejo</h1>\r\n            <h2>Crear Vuelos</h2>\r\n            <form onSubmit={handleSubmit}>\r\n                <label>\r\n                    Origen:\r\n                    <input type=\"text\" className=\"inputField\" value={origen} onClick={() => setShowSuggestionsOrigen(true)} onBlur={() => setTimeout(() => setShowSuggestionsOrigen(false), 100)} onChange={handleOriginChange} />\r\n                    <div className=\"suggestionList\">\r\n                        {showSuggestionsOrigen && (\r\n                            <ul>\r\n                                {suggestionsOrigen.map((suggestion, index) => (\r\n                                    <li key={index}\r\n                                        className={`suggestionItem ${activeSuggestionIndexOrigen === index? 'active' : ''}`}\r\n                                        onClick={() => handleSuggestionClick(index)}>\r\n                                        {suggestion.name}\r\n                                    </li>\r\n                                ))}\r\n                            </ul>\r\n                        )}\r\n                    </div>\r\n                </label>\r\n                <label>\r\n                    Destino:\r\n                    <input type=\"text\" className=\"inputField\" value={destino} onClick={() => setShowSuggestionsDestino(true)} onBlur={() => setTimeout(() => setShowSuggestionsDestino(false), 100)} onChange={handleDestinationChange} />\r\n                    <div className=\"suggestionList\">\r\n                        {showSuggestionsDestino && (\r\n                            <ul>\r\n                                {suggestionsDestino.map((suggestion, index) => (\r\n                                    <li key={index}\r\n                                        className={`suggestionItem ${activeSuggestionIndexDestino === index? 'active' : ''}`}\r\n                                        onClick={() => handleSuggestionClick(index, setDestino, setShowSuggestionsDestino)}>\r\n                                        {suggestion.name}\r\n                                    </li>\r\n                                ))}\r\n                            </ul>\r\n                        )}\r\n                    </div>\r\n                </label>\r\n                <label>\r\n                    Día:\r\n                    <input type=\"date\" className=\"dayInput\" value={dia} onChange={(e) => setDia(e.target.value)} />\r\n                </label>\r\n                <button type=\"submit\" className=\"button\">Guardar</button>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default BookingForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}